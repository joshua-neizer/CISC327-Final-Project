#R6 - /buy [POST]

##R6.1
**The name of the ticket has to be alphanumeric-only - positive**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `alphanumeric123` into element `#buy_name`
* enter `1` into element `#buy_quantity`
* click element `#buy_submit`
* validate that the `#buy_message` element shows `Successful`
* open /logout

##R6.1
**The name of the ticket has to be alphanumeric-only - negative**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `special^character` into element `#buy_name`
* enter `1` into element `#buy_quantity`
* click element `#buy_submit`
* validate that the `#buy_message` element shows `Invalid ticket name`
* open /logout

##R6.1
**Space in the ticket name is only allowed if it is not the first or last character - negative**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter ` ticketname` into element `#buy_name`
* enter `1` into element `#buy_quantity`
* click element `#buy_submit`
* validate that the `#buy_message` element shows `Invalid ticket name`
* open /logout

##R6.1
**Space in the ticket name is only allowed if it is not the first or last character - negative**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `ticketname ` into element `#buy_name`
* enter `1` into element `#buy_quantity`
* click element `#buy_submit`
* validate that the `#buy_message` element shows `Invalid ticket name`
* open /logout

##R6.1
**Space in the ticket name is only allowed if it is not the first or last character - positive**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `ticket name` into element `#buy_name`
* enter `1` into element `#buy_quantity`
* click element `#buy_submit`
* validate that the `#buy_message` element shows `Successful`
* open /logout

##R6.2
**The name of the ticket is no longer than 60 characters**

```	assert POST /buy response is HTTP 200 for 60 character ticket name
	assert POST /buy response is HTTP 400 61 character ticket name	
```

##R6.3
**The quantity of the tickets has to be more than 0, and less than or equal to 100**

``` assert POST /buy response is HTTP 400 for buying 0 tickets
	assert POST /buy response is HTTP 400 for buying -1 tickets		
	assert POST /buy response is HTTP 200 for buying 80 tickets
	assert POST /buy response is HTTP 200 for buying 12 tickets	
	assert POST /buy response is HTTP 200 for buying 100 tickets
```

##R6.4
**The ticket name exists in the database and the quantity is more than the quantity requested to buy**

```
	[POST] buy 1 'abcd' ticket
	assert POST /buy response is HTTP 400 for get_all_tickets returning list with no 'abcd' element
	[POST] buy 2 'lady gaga' tickets
	assert POST /buy response is HTTP 400 for get_all_tickets returning list with 1 'lady gaga' element
	[POST] buy 1 'lady gaga' tickets
	assert POST /buy response is HTTP 200 for get_all_tickets returning list with 1 'lady gaga' element
```

##R6.5
**The user has more balance than the ticket price * quantity + service fee (35%) + tax (5%)**

```
	[POST] buy 1 ticket for $100
	GET user balance on '/' page
	assert POST response is HTTP 200 for $140 user balance 
	
	[POST] buy 1 ticket for $100
	GET user balance on '/' page
	assert POST response is HTTP 400 for $139 user balance 
```

##R6.6
**For any errors, redirect back to / and show an error message**

```
	[POST] buy ticket of quantity 0
	assert @app.route() value is equal to '/'
	assert error message HTML div in page
```