# R4 -  /sell POST

## R4.1

**The name of the ticket has to be alphanumeric-only,
and space allowed only if it is not the first or the last character.**

### R4.1.1

#### Data:

```
INVALID_TICKET_NAMES = [
	'special^character',
	' spacebefore',
	'spaceafter '
]
```

#### Mocking:

Mock backend.get_user to return a test_user instance

#### Actions:

(For each invalid ticket name)

- Navigate to `/` page
- Enter the following data into the `#sell-form`
  - enter `#sell-form-ticket-name` with ticket name
  - enter `#sell-form-ticket-price` with 50
- Click `#sell-form-submit`
- Wait for redirect
- Assert that `#error-message` contains "Error - invalid ticket name"

### R4.1.2

### Data:

```
VALID_TICKET_NAMES = [
	'space in between',
	'numbersandletters123456789`,
	'9876543'
]
```

#### Mocking:

Mock backend.get_user to return a test_user instance

#### Actions:

(For each invalid ticket name)

- Navigate to `/` page
- Enter the following data into the `#sell-form`
  - enter `#sell-form-ticket-name` with ticket name
  - enter `#sell-form-ticket-price` with 50
- Click `#sell-form-submit`
- Wait for redirect
- Assert that `#error-message` contains "Error - invalid ticket name"

## R4.2

**The name of the ticket is no longer than 60 characters**

```
assert POST /sell response is HTTP 200 for 60 character ticket name
assert POST /sell response is HTTP 400 for 61 character ticket name
```

## R4.3

**The quantity of the tickets has to be more than 0,
and less than or equal to 100**

```
assert POST response is HTTP 400 for selling -1 tickets
assert POST response is HTTP 400 for selling 0 tickets
assert POST response is HTTP 200 for selling 1 tickets
assert POST response is HTTP 200 for selling 50 tickets
assert POST response is HTTP 200 for selling 100 tickets
assert POST response is HTTP 400 for selling 101 tickets
```

## R4.4

**Price has to be of range [10,100]**

```
assert POST response is HTTP 400 for sell ticket at price = -11
assert POST response is HTTP 400 for sell ticket at price = 9
assert POST response is HTTP 200 for sell ticket at price = 10
assert POST response is HTTP 200 for sell ticket at price = 50
assert POST response is HTTP 200 for sell ticket at price = 100
assert POST response is HTTP 400 for sell ticket at price = 101
```

## R4.5

**Date must be given in the format YYYYMMDD**

Use the following invalid dates:

- `'January 23 2018'`
- `'01/02/99'`
- `'19991303'`
- `'19990465'`

Use the following valid dates:

- `'19990101'`
- `'20030517'`

```
For each valid date
	assert POST response is HTTP 200 for selling ticket with date

For each invalid date
	assert POST response is HTTP 400 for selling ticket with date
```

## R4.6 

**For any errors, redirect back to / and show an error message.**

```
[POST] sell ticket with invalid name '$$@!$'
assert redirected URL is equivalent to '/'
assert error message HTML div is present in page
```

## R4.7

**The added new ticket information will be posted on the user profile page**

```
[POST] sell valid ticket
GET user profile page
assert HTML div exists for ticket
assert information within div matches POSTed information
```
