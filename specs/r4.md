# R4 -  /sell POST

## R4.1

**The name of the ticket has to be alphanumeric-only,
and space allowed only if it is not the first or the last character.**

### R4.1.1 - **The name of the ticket has to be alphanumeric-only - positive**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `alphanumeric123` into element `#sell_name`
* enter `1` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Successful`
* open /logout

### R4.1.2 - **The name of the ticket has to be alphanumeric-only - negative - invalid character**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `alphanumeric123` into element `#sell_name`
* enter `1` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Invalid ticket name`
* open /logout

### R4.1.3 - **The name of the ticket has to be alphanumeric-only - negative - space before**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter ` spacebefore` into element `#sell_name`
* enter `1` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Invalid ticket name`
* open /logout

### R4.1.4 - **The name of the ticket has to be alphanumeric-only - negative - space after**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `spaceafter ` into element `#sell_name`
* enter `1` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Invalid ticket name`
* open /logout

## R4.2

**The name of the ticket is no longer than 60 characters**

### R4.2.1 - **positive - acceptable ticket name length**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `shortticketname` into element `#sell_name`
* enter `1` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Successful`
* open /logout

### R4.2.2 - **negative - ticket name too long**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `veeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeerylongname ` into element `#sell_name`
* enter `1` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Invalid ticket name`
* open /logout

## R4.3

**The quantity of the tickets has to be more than 0,
and less than or equal to 100**

### R4.3.1 - **positive - acceptable ticket quantity**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `shortticketname` into element `#sell_name`
* enter `50` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Successful`
* open /logout

### R4.3.2 - **negative - ticket quantity too small**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `shortticketname` into element `#sell_name`
* enter `-50` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Invalid ticket quantity`
* open /logout

### R4.3.3 - **negative - ticket quantity too great**

Mocking:
* Mock backend.get_user to return a test_user instance

Actions:
* open /logout (to invalidate any logged-in sessions that may exist)
* open /login
* enter test_user's email into element `#email`
* enter test_user's password into element `#password`
* click element `input[type="submit"]`
* open /
* enter `shortticketname` into element `#sell_name`
* enter `101` into element `#sell_quantity`
* enter `20` into element `#sell_price`
* click element `#sell_submit`
* validate that the `#sell_message` element shows `Invalid ticket quantity`
* open /logout

## R4.4

**Price has to be of range [10,100]**

```* enter `1` into element `#sell_quantity`
assert POST response is HTTP 400 for sell ticket at price = -11
assert POST response is HTTP 400 for sell ticket at price = 9
assert POST response is HTTP 200 for sell ticket at price = 10
assert POST response is HTTP 200 for sell ticket at price = 50
assert POST response is HTTP 200 for sell ticket at price = 100
assert POST response is HTTP 400 for sell ticket at price = 101
```

## R4.5

**Date must be given in the format YYYYMMDD**

Use the following invalid dates:

- `'January 23 2018'`
- `'01/02/99'`
- `'19991303'`
- `'19990465'`

Use the following valid dates:

- `'19990101'`
- `'20030517'`

```
For each valid date
	assert POST response is HTTP 200 for selling ticket with date

For each invalid date
	assert POST response is HTTP 400 for selling ticket with date
```

## R4.6 

**For any errors, redirect back to / and show an error message.**

```
[POST] sell ticket with invalid name '$$@!$'
assert redirected URL is equivalent to '/'
assert error message HTML div is present in page
```

## R4.7

**The added new ticket information will be posted on the user profile page**

```
[POST] sell valid ticket
GET user profile page
assert HTML div exists for ticket
assert information within div matches POSTed information
```
